<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SF-for Internet Distribution (SFID)</title>
<style>
:root {
  --primary-color: #4CAF50;
  --background-color: #121212;
  --text-color: #ffffff;
  --accent-color: #ff9800;
  --hover-color: #333;
  --transition-duration: 0.3s;
  --font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
  margin: 0;
  font-family: var(--font-family);
  background-color: var(--background-color);
  color: var(--text-color);
  transition: background-color var(--transition-duration), color var(--transition-duration);
}

/* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–º–æ–∂–µ—Ç–µ –∏—Ö –æ—Å—Ç–∞–≤–∏—Ç—å –∏–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –Ω–æ–≤—ã–π –¥–∏–∑–∞–π–Ω) */

.main-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

/* –•–µ–¥–µ—Ä */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  background-color: #222;
  transition: background-color var(--transition-duration);
}
.header-left, .header-right {
  display: flex;
  align-items: center;
}
.logo h2 {
  margin: 0;
  font-weight: normal;
  color: var(--primary-color);
}
.main-menu {
  display: flex;
  margin-left: 20px;
  flex-wrap: wrap;
}
.menu-item {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 8px;
  transition: background-color var(--transition-duration);
  margin-right: 5px;
}
.menu-item:hover, .menu-item.active {
  background-color: #333;
}
.menu-icon {
  margin-right: 8px;
  font-size: 1.2em;
}
.header-right {
  display: flex;
  align-items: center;
}
.user-info {
  margin-right: 10px;
}
.btn-icon {
  background: none;
  border: none;
  color: #fff;
  font-size: 1.2em;
  cursor: pointer;
  margin-left: 10px;
  transition: color 0.3s;
}
.btn-icon:hover {
  color: var(--accent-color);
}
.notification-bell {
  position: relative;
  font-size: 1.5em;
  cursor: pointer;
  margin-left: 20px;
  transition: color 0.3s;
}
.notification-bell:hover {
  color: var(--accent-color);
}
.notification-count {
  position: absolute;
  top: -8px;
  right: -8px;
  background-color: red;
  color: #fff;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 0.8em;
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç */
.content {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
  background-color: #1e1e1e;
  transition: background-color 0.3s;
}
.page {
  display: none;
  opacity: 0;
  transition: opacity var(--transition-duration);
}
.page.active {
  display: block;
  opacity: 1;
}
.page-title {
  font-size: 1.8em;
  margin-bottom: 20px;
  color: var(--primary-color);
}

/* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏" */
.connection-info {
  background-color: #2a2a2a;
  padding: 15px;
  border-radius: 10px;
  margin-bottom: 20px;
}
.connection-info h3 {
  margin-top: 0;
  margin-bottom: 10px;
  color: var(--accent-color);
}
.connection-item {
  display: flex;
  justify-content: space-between;
  padding: 4px 0;
}

/* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤–∏–¥–∂–µ—Ç–æ–≤, –∫–∞—Ä—Ç, –∫–Ω–æ–ø–æ–∫ */
.widgets-grid, .customization-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}
.widget {
  background-color: #2a2a2a;
  padding: 15px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  gap: 15px;
  transition: background-color 0.3s, transform 0.3s;
}
.widget:hover {
  background-color: #444;
  transform: translateY(-2px);
}
.widget-icon {
  font-size: 2em;
}
.widget-title {
  font-weight: bold;
  font-size: 1.2em;
  margin-bottom: 5px;
}
.widget-value {
  font-size: 1em;
}

/* –ú–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
.default-route {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 10px;
}

/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
.modal {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.modal-content {
  background: #222;
  border-radius: 8px;
  padding: 20px;
  max-height: 90%;
  overflow-y: auto;
}

/* –ö–Ω–æ–ø–∫–∏ –≤–Ω—É—Ç—Ä–∏ –º–æ–¥–∞–ª–æ–∫ */
button {
  cursor: pointer;
}
</style>
</head>
<body>

<!-- –ê—É–¥–∏–æ –¥–ª—è —Ç–µ—Å—Ç–∞ -->
<audio id="connectSound" src="assets/sounds/connect.mp3" preload="auto"></audio>
<audio id="errorSound" src="assets/sounds/error.mp3" preload="auto"></audio>
<audio id="buttonSound" src="assets/sounds/button.mp3" preload="auto"></audio>
<button id="testButton">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–≤—É–∫</button>

<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<div class="header">
  <div class="header-left">
    <div class="logo">
      <h2>SFID</h2>
      <span>v1.2.0</span>
    </div>
    <nav>
      <div class="menu-item active" data-page="dashboard">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
      <div class="menu-item" data-page="network">–°–µ—Ç—å</div>
      <div class="menu-item" data-page="wifi">Wi-Fi</div>
      <div class="menu-item" data-page="firewall">–ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä</div>
      <div class="menu-item" data-page="vpn">VPN</div>
      <div class="menu-item" data-page="qos">QoS</div>
      <div class="menu-item" data-page="nas">USB/NAS</div>
      <div class="menu-item" data-page="mobile">–ú–æ–±. —Å–µ—Ç–∏</div>
      <div class="menu-item" data-page="iot">IoT</div>
      <div class="menu-item" data-page="customization">–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è</div>
      <div class="menu-item" data-page="system">–°–∏—Å—Ç–µ–º–∞</div>
    </nav>
  </div>
  <div class="header-right">
    <div>–ì–æ—Å—Ç—å</div>
    <button id="themeToggle" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåô</button>
    <div id="notificationBell">üîî<span class="notification-count">3</span></div>
  </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
<div class="content">
  <div class="content-wrapper">

    <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
    <div class="page active" id="dashboard">
      <h2 class="page-title">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è SFID</h2>
      
      <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ -->
      <div class="connection-info" id="connectionInfo">
        <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏</h3>
        <div class="connection-item"><strong>–°—Ç–∞—Ç—É—Å GPON:</strong> <span id="gponStatus">Up(O5)</span></div>
        <div class="connection-item"><strong>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç:</strong> <span id="internetStatus">–†–∞–±–æ—Ç–∞–µ—Ç</span></div>
        <div class="connection-item"><strong>IP –∞–¥—Ä–µ—Å:</strong> <span id="ipAddress">–ü–æ–ª—É—á–∞–µ—Ç—Å—è...</span></div>
        <div class="connection-item"><strong>IP —à–ª—é–∑:</strong> <span id="gatewayIP">–ü–æ–ª—É—á–∞–µ—Ç—Å—è...</span></div>
        <div class="connection-item"><strong>–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä DNS:</strong> <span id="primaryDNS">–ü–æ–ª—É—á–∞–µ—Ç—Å—è...</span></div>
        <div class="connection-item"><strong>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä DNS:</strong> <span id="altDNS">–ü–æ–ª—É—á–∞–µ—Ç—Å—è...</span></div>
      </div>

      <!-- –ú–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
      <div class="section" style="margin-bottom:20px;">
        <h3>–ú–∞—Ä—à—Ä—É—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</h3>
        <div class="default-route">
          <select id="defaultRouteType">
            <option value="internet">–ò–Ω—Ç–µ—Ä–Ω–µ—Ç</option>
            <option value="iptv">IPTV</option>
            <option value="lan">–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å</option>
          </select>
          <button id="saveDefaultRoute" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </div>

      <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
      <div class="widgets-grid">
        <div class="widget"><div class="widget-icon">üåê</div><div class="widget-content"><div class="widget-title">–°–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div><div class="widget-value">–ê–∫—Ç–∏–≤–Ω–æ</div></div></div>
        <div class="widget"><div class="widget-icon">üì∂</div><div class="widget-content"><div class="widget-title">Wi-Fi —Å–µ—Ç—å</div><div class="widget-value">SFID-Network</div></div></div>
        <div class="widget"><div class="widget-icon">üõ°Ô∏è</div><div class="widget-content"><div class="widget-title">–ó–∞—â–∏—Ç–∞</div><div class="widget-value">–í–∫–ª—é—á–µ–Ω–∞</div></div></div>
        <div class="widget"><div class="widget-icon">‚ö°</div><div class="widget-content"><div class="widget-title">–°–∫–æ—Ä–æ—Å—Ç—å</div><div class="widget-value">100 –ú–±–∏—Ç/—Å</div></div></div>
        <div class="widget"><div class="widget-icon">üíæ</div><div class="widget-content"><div class="widget-title">–ü–∞–º—è—Ç—å</div><div class="widget-value">64%</div></div></div>
        <div class="widget"><div class="widget-icon">üì±</div><div class="widget-content"><div class="widget-title">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div><div class="widget-value">8 –æ–Ω–ª–∞–π–Ω</div></div></div>
      </div>
    </div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏ -->
    <div class="page" id="network">
      <h2 class="page-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏</h2>
      <div class="section">
        <h3>–û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
        <form id="networkForm">
          <label>–¢–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
            <select name="connection_type">
              <option value="dhcp">–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π IP (DHCP)</option>
              <option value="static">–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP</option>
            </select>
          </label><br>
          <label>IP-–∞–¥—Ä–µ—Å:
            <input type="text" name="ip_address" placeholder="192.168.1.2" />
          </label><br>
          <label>–ú–∞—Å–∫–∞ –ø–æ–¥—Å–µ—Ç–∏:
            <input type="text" name="subnet_mask" placeholder="255.255.255.0" />
          </label><br>
          <label>–®–ª—é–∑:
            <input type="text" name="gateway" placeholder="192.168.1.1" />
          </label><br>
          <label>DNS-—Å–µ—Ä–≤–µ—Ä—ã:
            <input type="text" name="dns" placeholder="8.8.8.8, 8.8.4.4" />
          </label><br>
          <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form>
      </div>
    </div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Wi-Fi -->
    <div class="page" id="wifi">
      <h2 class="page-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Wi-Fi</h2>
      <div class="section">
        <h3>–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
        <form id="wifiForm">
          <label>–ò–º—è —Å–µ—Ç–∏ (SSID):
            <input type="text" name="ssid" placeholder="–ú–æ—èWiFi" />
          </label><br>
          <label>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
            <select name="security">
              <option value="wpa2">WPA2</option>
              <option value="wpa3">WPA3</option>
              <option value="none">–ë–µ–∑ –∑–∞—â–∏—Ç—ã</option>
            </select>
          </label><br>
          <label>–ü–∞—Ä–æ–ª—å:
            <input type="password" name="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" />
          </label><br>
          <label>–ö–∞–Ω–∞–ª:
            <select name="channel">
              <option value="1">–ö–∞–Ω–∞–ª 1</option>
              <option value="6">–ö–∞–Ω–∞–ª 6</option>
              <option value="11">–ö–∞–Ω–∞–ª 11</option>
            </select>
          </label><br>
          <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </form>
      </div>
    </div>

    <!-- –ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä -->
    <div class="page" id="firewall">
      <h2 class="page-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞</h2>
      <div class="section">
        <button id="editFirewallRulesBtn" class="btn btn-primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞</button>
        <h3>–ü—Ä–∞–≤–∏–ª–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</h3>
        <form>
          <h4>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ</h4>
          <label>–ò–º—è –ø—Ä–∞–≤–∏–ª–∞:
            <input type="text" id="ruleName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø—Ä–∞–≤–∏–ª–∞" />
          </label>
          <button type="button" id="saveRuleBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ</button>
          <label>–¢–∏–ø:
            <select name="rule_type">
              <option value="allow">–†–∞–∑—Ä–µ—à–∏—Ç—å</option>
              <option value="deny">–ó–∞–ø—Ä–µ—Ç–∏—Ç—å</option>
            </select>
          </label><br>
          <label>–ü—Ä–æ—Ç–æ–∫–æ–ª:
            <select name="protocol">
              <option value="tcp">TCP</option>
              <option value="udp">UDP</option>
              <option value="both">–û–±–∞</option>
            </select>
          </label><br>
          <label>–ü–æ—Ä—Ç:
            <input type="number" name="port" placeholder="80" />
          </label><br>
          <label>IP-–∞–¥—Ä–µ—Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞:
            <input type="text" name="source_ip" placeholder="–õ—é–±–æ–π –∏–ª–∏ IP" />
          </label><br>
          <button type="button" id="addFirewallRule">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ</button>
        </form>
        <h4>–¢–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞</h4>
        <ul id="firewallRulesList"></ul>
      </div>
    </div>

    <!-- VPN -->
    <div class="page" id="vpn">
      <h2 class="page-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ VPN</h2>
      <div class="section" style="display:flex; flex-direction:column; gap:20px;">
        <button id="createVPN" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å VPN</button>
        <h4>–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</h4>
        <ul id="vpnList"></ul>
      </div>
    </div>

    <!-- QoS -->
    <div class="page" id="qos">
      <h2 class="page-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ QoS</h2>
      <div class="section">
        <h3>–ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞</h3>
        <button id="addQosRule" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ</button>
        <h4>–¢–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞</h4>
        <ul id="qosRules"></ul>
      </div>
    </div>

    <!-- USB/NAS -->
    <div class="page" id="nas">
      <h2 class="page-title">USB/NAS</h2>
      <div class="section">
        <button id="connectUSB">–ü–æ–¥–∫–ª—é—á–∏—Ç—å USB</button>
        <button id="configureNAS">–ù–∞—Å—Ç—Ä–æ–∏—Ç—å NAS</button>
        <h4>–û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h4>
        <ul>
          <li>–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞: USB 1TB</li>
          <li>–û–±—â–∏–π –¥–æ—Å—Ç—É–ø: –í–∫–ª—é—á–µ–Ω</li>
        </ul>
      </div>
    </div>

    <!-- –ú–æ–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏ -->
    <div class="page" id="mobile">
      <h2 class="page-title">–ú–æ–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏</h2>
      <div class="section">
        <form id="mobileForm">
          <label>–°–ª–æ—Ç SIM:
            <select name="sim_slot">
              <option value="1">SIM 1</option>
              <option value="2">SIM 2</option>
            </select>
          </label><br>
          <label>APN:
            <input type="text" name="apn" placeholder="internet" />
          </label><br>
          <label>–¢–∏–ø —Å–µ—Ç–∏:
            <select name="network_type">
              <option value="3g">3G</option>
              <option value="4g">4G</option>
              <option value="5g">5G</option>
            </select>
          </label><br>
          <button type="submit">–ü–æ–¥–∫–ª—é—á–∏—Ç—å</button>
        </form>
      </div>
    </div>

    <!-- IoT -->
    <div class="page" id="iot">
      <h2 class="page-title">IoT</h2>
      <div class="section">
        <button id="addIoTDeviceBtn">–î–æ–±–∞–≤–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</button>
        <h4>–ü–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h4>
        <ul id="connectedDevicesList">
          <li data-status="active">–¢–µ—Ä–º–æ—Å—Ç–∞—Ç ‚Äî —Å—Ç–∞—Ç—É—Å: –∞–∫—Ç–∏–≤–µ–Ω <button class="toggle-status">–û—Ç–∫–ª—é—á–∏—Ç—å</button></li>
          <li data-status="active">–ó–∞–º–æ–∫ ‚Äî —Å—Ç–∞—Ç—É—Å: –∞–∫—Ç–∏–≤–µ–Ω <button class="toggle-status">–û—Ç–∫–ª—é—á–∏—Ç—å</button></li>
        </ul>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ -->
    <div id="addDeviceModal" class="modal" style="display:none;">
      <div class="modal-content" style="width:400px; padding:20px;">
        <h3>–î–æ–±–∞–≤–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</h3>
        <form id="addDeviceForm">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
            <input type="text" id="deviceName" required />
          </label><br/><br/>
          <label>–ü–∞—Ä–æ–ª—å:
            <input type="password" id="devicePassword" />
          </label><br/><br/>
          <label>–°—Ç–∞—Ç—É—Å:
            <select id="deviceStatus">
              <option value="active">–ê–∫—Ç–∏–≤–µ–Ω</option>
              <option value="inactive">–û—Ç–∫–ª—é—á–µ–Ω</option>
            </select>
          </label><br/><br/>
          <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
          <button type="button" id="closeAddDevice">&times; –ó–∞–∫—Ä—ã—Ç—å</button>
        </form>
      </div>
    </div>

    <!-- –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è -->
<div class="page" id="customization">
  <h2 class="page-title">–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</h2>
  <div class="section">
    <h3>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</h3>
    <!-- –¶–≤–µ—Ç -->
    <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É (—Ü–≤–µ—Ç):</label>
    <select id="colorThemeSelect">
      <option value="#ffffff">–ë–µ–ª–∞—è (—Å–≤–µ—Ç–ª–∞—è)</option>
      <option value="#007bff">–°–∏–Ω—è—è</option>
      <option value="#222222">–¢–µ–º–Ω–∞—è</option>
      <option value="#28a745">–ó–µ–ª–µ–Ω–∞—è</option>
      <option value="#ff5733">–û—Ä–∞–Ω–∂–µ–≤–∞—è</option>
      <option value="#ffc107">–ñ–µ–ª—Ç–∞—è</option>
      <option value="#6f42c1">–ü—É—Ä–ø—É—Ä–Ω–∞—è</option>
    </select><br><br>
    <!-- –û–±–æ–∏ -->
    <label>–û–±–æ–∏ (—Ñ–æ—Ç–æ):</label>
    <input type="file" id="wallpaperUploader" accept="image/*" /><br><br>
    <!-- –ú—É–∑—ã–∫–∞ -->
    <label>–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞:</label>
    <input type="file" id="musicUploader" accept="audio/*" /><br><br>
    <!-- –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ -->
    <button id="playMusicBtn">‚ñ∂Ô∏è –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É</button>
    <button id="stopMusicBtn">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º—É–∑—ã–∫—É</button><br><br>
    <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π... -->
    <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞:</label>
    <input type="color" id="customColorScheme" value="#007bff" /><br><br>
    <label>–®—Ä–∏—Ñ—Ç:</label>
    <select id="customFontSelect">
      <option value="Arial">Arial</option>
      <option value="'Helvetica Neue', Helvetica">Helvetica Neue</option>
      <option value="'Times New Roman', serif">Times New Roman</option>
      <option value="'Courier New', monospace">Courier New</option>
      <option value="Georgia">Georgia</option>
    </select><br><br>
    <button id="saveCustomizationBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
  </div>
</div>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã -->
    <div class="page" id="system">
      <h2 class="page-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
      <div class="section">
        <h3>–û–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
        <button type="button">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</button>
        <button type="button">–û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É</button>
        <button type="button">–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
        <button type="button">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</button>
        <br><br>
        <label>–í—Ä–µ–º—è –∏ –¥–∞—Ç–∞:
          <input type="datetime-local" id="datetime" />
        </label><br><br>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
      </div>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <div class="footer">
      <p>SF-for Internet Distribution (SFID) v1.2.0 | <a href="#" style="color:white;">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a></p>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è USB, NAS, VPN, QoS, Firewall -->
<!-- USB -->
<div id="usbModal" class="modal" style="display:none;">
  <div class="modal-content" style="width:400px;">
    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ USB-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h3>
    <div id="usbStatusModal">–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</div>
    <button id="detectUSBModal">–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å USB</button>
    <form id="usbSettingsForm">
      <label>–ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
        <input type="text" name="usb_name" placeholder="USB-–Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å" />
      </label><br/><br/>
      <label>–û–±—â–∏–π –¥–æ—Å—Ç—É–ø:
        <select name="share">
          <option value="enabled">–í–∫–ª—é—á–µ–Ω</option>
          <option value="disabled">–í—ã–∫–ª—é—á–µ–Ω</option>
        </select>
      </label><br/><br/>
      <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button type="button" id="closeUsbModal">–ó–∞–∫—Ä—ã—Ç—å</button>
    </form>
  </div>
</div>

<!-- NAS -->
<div id="nasModal" class="modal" style="display:none;">
  <div class="modal-content" style="width:400px;">
    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ NAS</h3>
    <form id="nasSettingsForm">
      <label>–ò–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:
        <input type="text" name="nas_name" placeholder="–ú–æ–π NAS" />
      </label><br/><br/>
      <label>–û–±—â–∏–π –¥–æ—Å—Ç—É–ø:
        <select name="nas_share">
          <option value="enabled">–í–∫–ª—é—á–µ–Ω</option>
          <option value="disabled">–í—ã–∫–ª—é—á–µ–Ω</option>
        </select>
      </label><br/><br/>
      <label>–û–±—ä–µ–º –¥–∏—Å–∫–∞:
        <input type="text" name="disk_size" placeholder="1TB" />
      </label><br/><br/>
      <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
      <button type="button" id="closeNasModal">–ó–∞–∫—Ä—ã—Ç—å</button>
    </form>
  </div>
</div>

<!-- VPN -->
<div id="vpnModal" class="modal" style="display:none;">
  <div class="modal-content" style="width:500px;">
    <h3 id="vpnModalTitle">–î–æ–±–∞–≤–∏—Ç—å VPN</h3>
    <form id="vpnForm">
      <input type="hidden" id="vpnIndex" />
      <label>–ò–º—è VPN:
        <input type="text" id="vpnName" required />
      </label><br/><br/>
      <label>–ü–∞—Ä–æ–ª—å:
        <input type="password" id="vpnPassword" />
      </label><br/><br/>
      <label>–ü–æ–¥—Å–µ—Ç—å:
        <input type="text" id="vpnSubnet" placeholder="192.168.10.0/24" />
      </label><br/><br/>
      <label>IP-–∞–¥—Ä–µ—Å:
        <input type="text" id="vpnIp" placeholder="192.168.10.2" />
      </label><br/><br/>
      <label>–®–ª—é–∑:
        <input type="text" id="vpnGateway" placeholder="192.168.10.1" />
      </label><br/><br/>
      <label>DNS:
        <input type="text" id="vpnDns" placeholder="8.8.8.8" />
      </label><br/><br/>
      <label>–ü—Ä–æ–∫—Å–∏:
        <input type="text" id="vpnProxy" placeholder="http://proxy" />
      </label><br/><br/>
      <label>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
        <select id="vpnAuthType">
          <option value="none">–ù–µ—Ç</option>
          <option value="password">–ü–∞—Ä–æ–ª—å</option>
          <option value="cert">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</option>
        </select>
      </label><br/><br/>
      <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button type="button" id="cancelVpn" class="btn btn-warning">–û—Ç–º–µ–Ω–∞</button>
    </form>
  </div>
</div>

<!-- QoS -->
<div id="qosModal" class="modal" style="display:none;">
  <div class="modal-content" style="width:500px;">
    <h3>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ QoS</h3>
    <form id="qosForm">
      <input type="hidden" id="qosIndex" />
      <label>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
        <input type="text" id="qosDevice" required />
      </label><br/><br/>
      <label>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
        <select id="qosPriority">
          <option value="high">–í—ã—Å–æ–∫–∏–π</option>
          <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
          <option value="low">–ù–∏–∑–∫–∏–π</option>
        </select>
      </label><br/><br/>
      <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button type="button" id="cancelQos" class="btn btn-warning">–û—Ç–º–µ–Ω–∞</button>
    </form>
  </div>
</div>

<!-- –ü—Ä–∞–≤–∏–ª–∞ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞ -->
<div id="firewallRulesModal" class="modal" style="display:none;">
  <div class="modal-content" style="width:600px;">
    <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞</h3>
    <button id="addFirewallRuleBtn" class="btn btn-success" style="margin-bottom:10px;">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ</button>
    <div style="max-height:300px; overflow-y:auto;">
      <table style="width:100%; border-collapse: collapse;">
        <thead>
          <tr>
            <th style="border:1px solid #555; padding:8px;">–¢–∏–ø</th>
            <th style="border:1px solid #555; padding:8px;">–î–µ–π—Å—Ç–≤–∏–µ</th>
            <th style="border:1px solid #555; padding:8px;">–ü—Ä–æ—Ç–æ–∫–æ–ª</th>
            <th style="border:1px solid #555; padding:8px;">–ü–æ—Ä—Ç</th>
            <th style="border:1px solid #555; padding:8px;">IP-–∞–¥—Ä–µ—Å</th>
            <th style="border:1px solid #555; padding:8px;">–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody id="firewallRulesTableBody"></tbody>
      </table>
    </div>
    <br>
    <button id="closeFirewallRulesBtn" class="btn btn-warning">–ó–∞–∫—Ä—ã—Ç—å</button>
  </div>
</div>

<!-- –°–∫—Ä–∏–ø—Ç -->
<script>
document.addEventListener('DOMContentLoaded', () => {

  // --- –û–±—ä—è–≤–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ---
  const notification = document.getElementById('notificationBell');
  if (notification) {
    notification.innerHTML = 'üîî<span class="notification-count">3</span>';
  }

  // --- –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–≤—É–∫–∞ ---
  const buttonSound = document.getElementById('buttonSound');
  document.getElementById('testButton')?.addEventListener('click', () => {
    if (buttonSound) buttonSound.play().catch(()=>{});
  });

  // --- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü ---
  document.querySelectorAll('.menu-item').forEach(item => {
    item.addEventListener('click', () => {
      document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
      item.classList.add('active');
      const pageId = item.getAttribute('data-page');
      document.querySelectorAll('.page').forEach(p => {
        p.id === pageId ? p.classList.add('active') : p.classList.remove('active');
      });
    });
  });

  // --- –ú–æ–¥–∞–ª–∫–∏ USB –∏ NAS ---
  document.querySelector('#connectUSB')?.addEventListener('click', () => {
    document.getElementById('usbModal').style.display = 'flex';
    updateUsbStatusInModal();
  });
  document.querySelector('#configureNAS')?.addEventListener('click', () => {
    document.getElementById('nasModal').style.display = 'flex';
  });
  document.querySelector('#closeUsbModal')?.addEventListener('click', () => {
    document.getElementById('usbModal').style.display = 'none';
  });
  document.querySelector('#closeNasModal')?.addEventListener('click', () => {
    document.getElementById('nasModal').style.display = 'none';
  });

  // --- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ USB ---
  function updateUsbStatusInModal() {
    const usbStatusDiv = document.getElementById('usbStatusModal');
    const hasUSB = Math.random() > 0.3;
    if (usbStatusDiv) {
      usbStatusDiv.innerText = hasUSB ? 'USB-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ: USB-–Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å 1TB' : '–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞';
    }
  }

  // --- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º USB –∏ NAS ---
  document.getElementById('usbSettingsForm')?.addEventListener('submit', e => {
    e.preventDefault();
    alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ USB —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
    document.getElementById('usbModal').style.display = 'none';
  });
  document.getElementById('nasSettingsForm')?.addEventListener('submit', e => {
    e.preventDefault();
    alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ NAS —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
    document.getElementById('nasModal').style.display = 'none';
  });

  // --- IoT ---
  document.getElementById('addIoTDeviceBtn')?.addEventListener('click', () => {
    document.getElementById('addDeviceModal').style.display = 'flex';
  });
  document.querySelector('#closeAddDevice')?.addEventListener('click', () => {
    document.getElementById('addDeviceModal').style.display = 'none';
  });

  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  document.getElementById('addDeviceForm')?.addEventListener('submit', e => {
    e.preventDefault();
    const name = document.getElementById('deviceName')?.value.trim();
    const password = document.getElementById('devicePassword')?.value.trim();
    const status = document.getElementById('deviceStatus')?.value;
    if (!name) { alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞'); return; }
    const li = document.createElement('li');
    li.setAttribute('data-status', status);
    li.innerHTML = `
      ${name} ‚Äî —Å—Ç–∞—Ç—É—Å: ${status === 'active' ? '–∞–∫—Ç–∏–≤–µ–Ω' : '–æ—Ç–∫–ª—é—á–µ–Ω'}
      <button class="toggle-status">${status === 'active' ? '–û—Ç–∫–ª—é—á–∏—Ç—å' : '–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å'}</button>
    `;
    document.getElementById('connectedDevicesList')?.appendChild(li);
    attachToggleHandler(li.querySelector('.toggle-status'));
    document.getElementById('addDeviceForm').reset();
    document.getElementById('addDeviceModal').style.display = 'none';
  });
  function attachToggleHandler(btn) {
    if (!btn) return;
    btn.addEventListener('click', () => {
      const li = btn.parentElement;
      const currentStatus = li.getAttribute('data-status');
      if (currentStatus === 'active') {
        li.setAttribute('data-status', 'inactive');
        li.innerHTML = `
          ${li.firstChild.textContent.trim().split('‚Äî')[0]} ‚Äî —Å—Ç–∞—Ç—É—Å: –æ—Ç–∫–ª—é—á–µ–Ω
          <button class="toggle-status">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
        `;
      } else {
        li.setAttribute('data-status', 'active');
        li.innerHTML = `
          ${li.firstChild.textContent.trim().split('‚Äî')[0]} ‚Äî —Å—Ç–∞—Ç—É—Å: –∞–∫—Ç–∏–≤–µ–Ω
          <button class="toggle-status">–û—Ç–∫–ª—é—á–∏—Ç—å</button>
        `;
      }
      attachToggleHandler(li.querySelector('.toggle-status'));
    });
  }
  document.querySelectorAll('.toggle-status').forEach(btn => {
    attachToggleHandler(btn);
  });

  // --- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ ---
  function saveFormData(formId, storageKey) {
    const form = document.getElementById(formId);
    if (!form) return;
    const data = {};
    new FormData(form).forEach((value, key) => {
      data[key] = value;
    });
    localStorage.setItem(storageKey, JSON.stringify(data));
  }
  function loadFormData(formId, storageKey) {
    const dataStr = localStorage.getItem(storageKey);
    if (!dataStr) return;
    const data = JSON.parse(dataStr);
    const form = document.getElementById(formId);
    if (!form) return;
    Object.keys(data).forEach(k => {
      if (form.elements[k]) {
        form.elements[k].value = data[k];
      }
    });
  }
  ['networkForm','wifiForm','qosForm','systemForm','mobileForm'].forEach(id => {
    document.getElementById(id)?.addEventListener('submit', e => {
      e.preventDefault();
      saveFormData(id, id + 'Settings');
      alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
    });
  });
  ['networkForm','wifiForm','systemForm','mobileForm'].forEach(id => {
    loadFormData(id, id + 'Settings');
  });

  // --- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ IoT ---
  const devicesStr = localStorage.getItem('iotDevices');
  if (devicesStr) {
    const devices = JSON.parse(devicesStr);
    const list = document.getElementById('connectedDevicesList');
    if (list) {
      list.innerHTML = '';
      devices.forEach(dev => {
        const li = document.createElement('li');
        li.setAttribute('data-status', dev.status);
        li.innerHTML = `
          ${dev.name} ‚Äî —Å—Ç–∞—Ç—É—Å: ${dev.status === 'active' ? '–∞–∫—Ç–∏–≤–µ–Ω' : '–æ—Ç–∫–ª—é—á–µ–Ω'}
          <button class="toggle-status">${dev.status === 'active' ? '–û—Ç–∫–ª—é—á–∏—Ç—å' : '–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å'}</button>
        `;
        list.appendChild(li);
        attachToggleHandler(li.querySelector('.toggle-status'));
      });
    }
  }

  // --- –†–∞–±–æ—Ç–∞ —Å —Ñ–æ–Ω–æ–≤—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏ –º—É–∑—ã–∫–æ–π ---
  const wallpaperInput = document.getElementById('wallpaperUploader');
  const musicInput = document.getElementById('musicUploader');
  wallpaperInput?.addEventListener('change', () => {
    if (wallpaperInput.files.length > 0) {
      const url = URL.createObjectURL(wallpaperInput.files[0]);
      document.body.style.backgroundImage = `url(${url})`;
      document.body.style.backgroundSize = 'cover';
      document.body.style.backgroundPosition = 'center';
    }
  });
  const music = document.createElement('audio');
  document.getElementById('playMusicBtn')?.addEventListener('click', () => {
    if (musicInput && musicInput.files.length > 0) {
      const url = URL.createObjectURL(musicInput.files[0]);
      music.src = url;
      music.play();
    } else {
      alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –º—É–∑—ã–∫–∏');
    }
  });
  document.getElementById('stopMusicBtn')?.addEventListener('click', () => {
    music.pause();
  });

  // --- –†–∞–±–æ—Ç–∞ —Å VPN ---
  const vpnList = document.getElementById('vpnList');
  let vpnData = [];
  function renderVpnList() {
    vpnList.innerHTML = '';
    vpnData.forEach((vpn, index) => {
      const li = document.createElement('li');
      li.innerHTML = `
        <strong>${vpn.name}</strong> ‚Äî –°—Ç–∞—Ç—É—Å: ${vpn.connected ? '–ø–æ–¥–∫–ª—é—á–µ–Ω–æ' : '–æ—Ç–∫–ª—é—á–µ–Ω–æ'}
        <button data-index="${index}" class="btn btn-primary connect-btn">${vpn.connected ? '–û—Ç–∫–ª—é—á–∏—Ç—å' : '–ü–æ–¥–∫–ª—é—á–∏—Ç—å'}</button>
        <button data-index="${index}" class="btn btn-warning edit-btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <button data-index="${index}" class="btn btn-danger delete-btn">–£–¥–∞–ª–∏—Ç—å</button>
      `;
      vpnList.appendChild(li);
    });
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    document.querySelectorAll('.connect-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const idx = parseInt(btn.getAttribute('data-index'));
        vpnData[idx].connected = !vpnData[idx].connected;
        renderVpnList();
      });
    });
    document.querySelectorAll('.edit-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const idx = parseInt(btn.getAttribute('data-index'));
        openVpnModal('edit', idx);
      });
    });
    document.querySelectorAll('.delete-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const idx = parseInt(btn.getAttribute('data-index'));
        vpnData.splice(idx, 1);
        renderVpnList();
      });
    });
  }

  function openVpnModal(mode, index = null) {
    const modal = document.getElementById('vpnModal');
    const title = document.getElementById('vpnModalTitle');
    const form = document.getElementById('vpnForm');

    if (mode === 'add') {
      title.innerText = '–î–æ–±–∞–≤–∏—Ç—å VPN';
      form.reset();
      document.getElementById('vpnIndex').value = '';
    } else if (mode === 'edit') {
      title.innerText = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å VPN';
      const vpn = vpnData[index];
      document.getElementById('vpnIndex').value = index;
      document.getElementById('vpnName').value = vpn.name;
      document.getElementById('vpnPassword').value = vpn.password;
      document.getElementById('vpnSubnet').value = vpn.subnet;
      document.getElementById('vpnIp').value = vpn.ip;
      document.getElementById('vpnGateway').value = vpn.gateway;
      document.getElementById('vpnDns').value = vpn.dns;
      document.getElementById('vpnProxy').value = vpn.proxy;
      document.getElementById('vpnAuthType').value = vpn.authType;
    }
    modal.style.display = 'flex';

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∞–±–º–∏—Ç–∞
    form.onsubmit = (e) => {
      e.preventDefault();
      const vpnObj = {
        name: document.getElementById('vpnName').value.trim(),
        password: document.getElementById('vpnPassword').value.trim(),
        subnet: document.getElementById('vpnSubnet').value.trim(),
        ip: document.getElementById('vpnIp').value.trim(),
        gateway: document.getElementById('vpnGateway').value.trim(),
        dns: document.getElementById('vpnDns').value.trim(),
        proxy: document.getElementById('vpnProxy').value.trim(),
        authType: document.getElementById('vpnAuthType').value,
        connected: false
      };
      const idxStr = document.getElementById('vpnIndex').value;
      if (idxStr === '') {
        vpnData.push(vpnObj);
      } else {
        vpnData[parseInt(idxStr)] = vpnObj;
      }
      renderVpnList();
      modal.style.display = 'none';
    };
    // –û—Ç–º–µ–Ω–∞
    document.getElementById('cancelVpn').onclick = () => {
      modal.style.display = 'none';
    };
  }

  document.getElementById('createVPN')?.addEventListener('click', () => {
    openVpnModal('add');
  });
  document.querySelectorAll('.modal').forEach(m => {
    m.onclick = (e) => {
      if (e.target === m) m.style.display = 'none';
    };
  });

  // --- –†–∞–±–æ—Ç–∞ —Å QoS ---
  const qosList = document.getElementById('qosRules');
  let qosRules = [];
  function renderQosRules() {
    qosList.innerHTML = '';
    qosRules.forEach((rule, index) => {
      const li = document.createElement('li');
      li.innerHTML = `
        ${rule.device} ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: ${rule.priority}
        <button data-index="${index}" class="btn btn-primary toggle-qos">${rule.active ? '–û—Ç–∫–ª—é—á–∏—Ç—å' : '–í–∫–ª—é—á–∏—Ç—å'}</button>
        <button data-index="${index}" class="btn btn-warning edit-qos">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <button data-index="${index}" class="btn btn-danger delete-qos">–£–¥–∞–ª–∏—Ç—å</button>
      `;
      qosList.appendChild(li);
    });
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    document.querySelectorAll('.toggle-qos').forEach(btn => {
      btn.addEventListener('click', () => {
        const idx = parseInt(btn.getAttribute('data-index'));
        qosRules[idx].active = !qosRules[idx].active;
        renderQosRules();
      });
    });
    document.querySelectorAll('.edit-qos').forEach(btn => {
      btn.addEventListener('click', () => {
        const idx = parseInt(btn.getAttribute('data-index'));
        openQosModal('edit', idx);
      });
    });
    document.querySelectorAll('.delete-qos').forEach(btn => {
      btn.addEventListener('click', () => {
        const idx = parseInt(btn.getAttribute('data-index'));
        qosRules.splice(idx,1);
        renderQosRules();
      });
    });
  }
  function openQosModal(mode, index = null) {
    const modal = document.getElementById('qosModal');
    const title = document.getElementById('qosModalTitle');
    const form = document.getElementById('qosForm');

    if (mode === 'add') {
      title.innerText = '–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ QoS';
      form.reset();
      document.getElementById('qosIndex').value = '';
    } else if (mode === 'edit') {
      title.innerText = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ QoS';
      const rule = qosRules[index];
      document.getElementById('qosIndex').value = index;
      document.getElementById('qosDevice').value = rule.device;
      document.getElementById('qosPriority').value = rule.priority;
    }
    modal.style.display = 'flex';

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∞–±–º–∏—Ç–∞
    form.onsubmit = (e) => {
      e.preventDefault();
      const ruleObj = {
        device: document.getElementById('qosDevice').value.trim(),
        priority: document.getElementById('qosPriority').value,
        active: true
      };
      const idxStr = document.getElementById('qosIndex').value;
      if (idxStr === '') {
        qosRules.push(ruleObj);
      } else {
        qosRules[parseInt(idxStr)] = ruleObj;
      }
      renderQosRules();
      modal.style.display = 'none';
    };
    // –û—Ç–º–µ–Ω–∞
    document.getElementById('cancelQos').onclick = () => {
      modal.style.display = 'none';
    };
  }
  document.getElementById('addQosRule')?.addEventListener('click', () => {
    openQosModal('add');
  });
  document.querySelectorAll('.modal').forEach(m => {
    m.onclick = (e) => {
      if (e.target === m) m.style.display = 'none';
    };
  });
});

// --- –í–ê–ñ–ù–û: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö IP, —à–ª—é–∑–∞ –∏ DNS ---

// –ò—Å–ø–æ–ª—å–∑—É–µ–º external API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP
fetch('https://api.ipify.org?format=json')
  .then(res => res.json())
  .then(data => {
    document.getElementById('ipAddress').innerText = data.ip;
  });

// –ü–æ–ª—É—á–µ–Ω–∏–µ DNS –∏ —à–ª—é–∑–∞ ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º WebRTC –∏–ª–∏ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã, –Ω–æ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –±—Ä–∞—É–∑–µ—Ä–∞ ‚Äî –ª—É—á—à–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –∏–ª–∏ –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
// –ù–∏–∂–µ –ø—Ä–∏–º–µ—Ä —Å —Å—Ç–∞—Ç–∏–∫–æ–π, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ API –∏–ª–∏ —Ä–∞—Å
